<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Giriş</title>
    <style>
    body
    {
        margin:0;
        height:100vh;
        display:flex;
        justify-content:center;
        align-items:center;
        font-family:Segoe UI, sans-serif;
        background:linear-gradient(135deg, #1f2933, #111827);
    }

    .login
    {
        width:420px;
        padding:35px 40px;
        background:rgba(255,255,255,0.95);
        border-radius:18px;
        box-shadow:0 20px 40px rgba(0,0,0,.35);
        position:relative;
    }

    .login-title
    {
        text-align:center;
        font-size:28px;
        font-weight:600;
        margin-bottom:25px;
        color:#1f2933;
    }

    .flash
    {
        position:absolute;
        top:-60px;
        left:50%;
        transform:translateX(-50%);
        padding:12px 20px;
        border-radius:10px;
        font-weight:600;
        font-size:15px;
        opacity:0;
        animation:fadeIn .4s forwards;
    }
   
    .alert-success
    { 
        background:#d1fae5; 
        color:#065f46; 
    }
   
    .alert-danger
    { 
        background:#fee2e2;
        color:#991b1b; 
    }
    
    .alert-info
    { 
        background:#e0f2fe; 
        color:#075985; 
    }

    @keyframes fadeIn
    {
        from{opacity:0; transform:translate(-50%,-15px);}
        to{opacity:1; transform:translate(-50%,0);}
    }
   
    @keyframes fadeOut
    {
        from{opacity:1;}
        to{opacity:0;}
    }

    .button
    {
        display:flex;
        gap:10px;
        margin-bottom:20px;
    }
    
    .button button
    {
        flex:1;
        padding:12px;
        border:none;
        border-radius:10px;
        cursor:pointer;
        background:#1f2933;
        color:white;
        font-size:15px;
        transition:.3s;
    }
   
    .button button:hover
    {
        background:#374151;
    }

    .member label
    {
        font-size:14px;
        font-weight:600;
        margin-bottom:5px;
        display:block;
        color:#374151;
    }
    
    .member input
    {
        width:100%;
        padding:12px;
        margin-bottom:15px;
        border-radius:10px;
        border:1px solid #cbd5e1;
        font-size:15px;
    }

    .member input:focus
    {
        outline:none;
        border-color:#2563eb;
    }

    .member button
    {
        width:100%;
        padding:14px;
        border:none;
        border-radius:12px;
        background:#16a34a;
        color:white;
        font-size:16px;
        cursor:pointer;
        transition:.3s;
    }

    .member button:hover
    {
        background:#15803d;
    }

    .toggle
    {
        text-align:center;
        margin-top:15px;
    }

    .toggle a
    {
        font-size:14px;
        color:#2563eb;
        cursor:pointer;
        text-decoration:none;
    }

    .toggle a:hover
    {
        text-decoration:underline;
    }
    </style>
</head>
<body>
    <div class="login">

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% set category, message = messages[-1] %}
            <div id="flashMessage" class="flash alert-{{ category }}">
                {{ message }}
            </div>
        {% endif %}
        {% endwith %}

        <div class="login-title">Kütüphane Girişi</div>

        <div class="button">
            <button onclick="showForm('user')">Üye Girişi</button>
            <button onclick="showForm('admin')">Admin Girişi</button>
        </div>

        <div class="member">
            <form id="loginForm">
                <div id="formContent"></div>
                <button type="submit">Giriş Yap</button>
            </form>

            <div class="toggle">
                <a onclick="showForm('register')">Hesabın yok mu? Kayıt Ol</a>
            </div>
        </div>
    </div>
    <script>
    function showForm(type)
    {
        let formContent = document.getElementById("formContent");
        let button = document.querySelector(".member button");
        let form = document.getElementById("loginForm");

        if(type=="user")
        {
            formContent.innerHTML=`
                <label>E-posta</label>
                <input type="email" name="email" required>
                <label>Şifre</label>
                <input type="password" name="password" required>
            `;
            button.textContent="Giriş Yap";
            form.action="/userLogin";
            form.method="POST";
        }
        else if(type=="admin")
        {
            formContent.innerHTML=`
                <label>Admin Mail</label>
                <input type="email" name="adminMail" required>
                <label>Şifre</label>
                <input type="password" name="adminSifre" required>
            `;
            button.textContent="Admin Girişi";
            form.action="/adminLogin";
            form.method="POST";
        }
        else if(type=="register")
        {
            formContent.innerHTML=`
                <label>Kullanıcı Adı</label>
                <input type="text" name="username" required>
                <label>E-posta</label>
                <input type="email" name="email" required>
                <label>Şifre</label>
                <input type="password" name="password" required>
            `;
            button.textContent="Kayıt Ol";
            form.action="/register";
            form.method="POST";
        }
    }
    showForm("user");
    setTimeout(()=>{
        let msg=document.getElementById("flashMessage");
        if(msg) msg.style.animation="fadeOut .5s forwards";
    },2000);
    </script>
</body>
</html>
